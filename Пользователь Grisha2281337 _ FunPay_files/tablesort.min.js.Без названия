(function(a){a.tablesort=function(e,d){var b=this;b.table=e;b.settings=a.extend({},a.tablesort.defaults,d);b.headers=e.find(b.settings.div?".tc-header .sort":"thead th.sort");b.settings.parsers=b.settings.parsers||{};b.index=null;b.direction=null;b.loading=false;a.each(["asc","desc"],function(g,f){var h=b.headers.filter("."+b.settings[f]);if(h.length){b.index=h.index();b.direction=f;h.data("sort-dir",f)}});var c=a.extend({num:function(f){return parseFloat(f.toString().replace(/[^\d.+-]+/g,""))||0}},b.settings.parsers);b.parse=function(g,f){return g&&c.hasOwnProperty(g)?c[g](f):f};b.headers.on("click.tablesort",function(){b.sort(a(this));return false});b.headers.bind("selectstart",false)};a.tablesort.prototype={sort:function(c){var b=this;if(b.loading){return}b.loading=true;var d="loading";b.headers.addClass(d);setTimeout(function(){var e,q,p;if(b.settings.div){e=b.table.find(".dyn-table-body");if(!e.length){e=b.table}var h=".tc-item";q=e.find(h);p=e.find(h+" ."+c.data("sort-field"))}else{e=b.table.find("tbody");q=e.find("tr");p=e.find("tr td:nth-child("+(c.index()+1)+")")}var m=c.data("sort-type");var n=c.data("sort-getter")||function(s,i){var r=i.data("s");return r!=null?r:i.text()};var o=p.map(function(s,r){return b.parse(m,n(a(c),a(r)))});if(b.index!==c.index()){b.index=c.index();b.direction=c.data("sort-dir")=="desc"?"desc":"asc"}else{b.direction=b.direction=="asc"?"desc":"asc"}var k=[];for(var l=0,g=o.length;l<g;++l){k.push({row:q[l],value:o[l]})}var f=b.direction=="asc"?1:-1;k.sort(function(r,i){return b.settings.compare(r.value,i.value)*f});var j=[];a.each(k,function(r,s){j.push(s.row)});e.append(j);b.headers.removeClass(b.settings.asc+" "+b.settings.desc);c.addClass(b.settings[b.direction]);b.headers.removeClass(d);b.table.trigger("sorted.tablesort");setTimeout(function(){b.loading=false},50)},10)},destroy:function(){this.headers.off("click.tablesort");this.table.data("tablesort",null)}};a.tablesort.defaults={asc:"ascending",desc:"descending",div:false,compare:function(d,c){if(d>c){return 1}else{if(d<c){return -1}else{return 0}}}};a.fn.tablesort=function(b){var d,c;return this.each(function(){d=a(this);c=d.data("tablesort");if(!c){d.data("tablesort",new a.tablesort(d,b))}})}})(window.jQuery);