(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"5b0d216c209c8398b2bf":function(e,t,n){"use strict";n.r(t);var s=n("5f95f5d90d238fa0d86a"),i=n.n(s),a=n("c8c4de41a952f93b8bf9"),o=n.n(a),c=n("9d0a762c68b04db80a58"),l=n.n(c),r=n("e026a4a5eab83117dbc9"),u=n.n(r),d=n("1495cbcf66b387f322bd"),p=n.n(d),h=n("ac984996a79308ebe69c"),f=n.n(h),v=n("dd78d97984a35d590f30"),b=n.n(v),k=n("4f9eb88e2b98053d0224"),g=n.n(k),y=n("8613a2facb3a2b838c4c"),m=n.n(y),O=n("a24b5f2378113a79e775"),x=n.n(O),E=(n("279c0f0c00aa45d41952"),n("4388ce4b8eca04d4217f")),w=n.n(E),S=n("c941771c892f8eea9763"),L=n.n(S),M=13,I=27,A=32,H=38,C=40,T=39,q=37,N=function(e,t){var n=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector;return!!n&&n.call(e,t)},_=n("aa002c9ecdc30c05062b"),P=n.n(_),F=n("a8f8105d2d40178f277f"),B=function(){function e(t){b()(this,e),this.props=t,this.render(),this.setEventListeners()}return g()(e,[{key:"updateProps",value:function(e){this.props=p()({},this.props,e),this.render(),-1===e.focusedIndex&&this.focus()}},{key:"setEventListeners",value:function(){var e,t,n=this.props.container;n.addEventListener("click",f()(e=this.clickHandler).call(e,this)),n.addEventListener("keydown",f()(t=this.onKeyDown).call(t,this))}},{key:"onKeyDown",value:function(e){var t=this.props,n=t.unselectOption,s=t.focusToggle;if(46===e.keyCode||8===e.keyCode){e.preventDefault();var i=e.target.getElementsByTagName("input");n(x()(i,1)[0].value),s()}}},{key:"clickHandler",value:function(e){var t=this.props,n=t.isOpen,s=t.openMenu,i=t.unselectOption,a=t.focusToggle,o=e.target;N(o,'[aria-label="close"]')||N(o,'span[aria-label="'.concat(P()("txt.help_center.views.requests.new.multiselect_remove_value"),'"]'))?i(e.target.nextElementSibling.value):n||s(),a()}},{key:"focus",value:function(){this.props.container.focus()}},{key:"render",value:function(){var e,t=this.props,n=t.container,s=t.selectedOptions,i=t.attributes,a=t.isOpen,c=F.a.get("theming_api_version");n.tabIndex=0,n.id=i.id,n.setAttribute("aria-required",i["aria-required"]),n.setAttribute("aria-describedby",i["aria-describedby"]),n.setAttribute("aria-labelledby",i["aria-labelledby"]),n.setAttribute("role","listbox"),n.setAttribute("aria-haspopup","true"),n.setAttribute("aria-expanded",a),n.innerHTML=o()(e='\n      <ul role="listbox" aria-labelledby="'.concat(i.id,'_label">\n        ')).call(e,m()(s).call(s,(function(e){var t,n,s;return o()(t=o()(n=o()(s='\n            <li tabindex="0" role="option">\n              <span>'.concat(e.label,'</span>\n              <span aria-label="')).call(s,1===c?"close":P()("txt.help_center.views.requests.new.multiselect_remove_value"),'"></span>\n              <input name="')).call(n,i.name,'[]" value="')).call(t,e.value,'" type="hidden"/>\n            </li>\n          ')})).join(""),"</ul>\n    ")}}]),e}(),D=n("9466c4bf0b991fb30fa6"),j=n.n(D),J=n("549a709a8f94b14e0e58"),K=n.n(J),z=function(){function e(t){b()(this,e),this.props=t,this.render(),this.setEventListeners()}return g()(e,[{key:"updateProps",value:function(e){var t=this.props,n=t.options,s=t.selectedOptions,i=e.options,a=e.selectedOptions;if(this.props=p()({},this.props,e),n!==i){var o=i[0].parent===n;this.render(o)}else s.length!==a.length&&this.updateCheckboxes(s,a);this.focusCurrentOption()}},{key:"setEventListeners",value:function(){var e,t,n=this.props.container;n.addEventListener("click",f()(e=this.clickHandler).call(e,this)),n.addEventListener("mouseover",f()(t=this.hoverHandler).call(t,this))}},{key:"clickHandler",value:function(e){var t=this.props,n=t.focusOption,s=t.selectFocused,i=e.target;if(N(i,"[data-index] label")){var a=K()(i.parentElement.dataset.index,10);e.preventDefault(),n(a),s()}}},{key:"hoverHandler",value:function(e){var t=this.props.focusOption,n=e.target;N(n,"[data-index] label")&&t(K()(n.parentElement.dataset.index,10))}},{key:"updateCheckboxes",value:function(e,t){var n=this.props.container,s=m()(e).call(e,(function(e){return e.value})),a=m()(t).call(t,(function(e){return e.value})),o=i()(a).call(a,(function(e){return-1===u()(s).call(s,e)})),c=i()(s).call(s,(function(e){return-1===u()(a).call(a,e)}));L()(o).call(o,(function(e){var t=n.querySelector("input[value='".concat(e,"']"));t&&(t.checked=!0,t.parentElement.parentElement.setAttribute("aria-checked","true"))})),L()(c).call(c,(function(e){var t=n.querySelector("input[value='".concat(e,"']"));t&&(t.checked=!1,t.parentElement.parentElement.setAttribute("aria-checked","false"))}))}},{key:"focusCurrentOption",value:function(){var e=this.props,t=e.container,n=e.focusedIndex,s=t.querySelector('[data-index="'.concat(n,'"]'));s&&s.focus()}},{key:"createMenu",value:function(){var e=this.props,t=e.options,n=e.selectedOptions,s=document.createElement("ul");return s.setAttribute("role","listbox"),s.innerHTML=m()(t).call(t,(function(e,t){var s,a,c,l,r,u,d,p,h,f,v=!!e.parent,b=!!e.options,k=!v&&!b,g=e.value&&i()(n).call(n,(function(t){return t.value===e.value})).length>0,y=o()(s=o()(a=o()(c=o()(l=o()(r=o()(u=o()(d=o()(p=o()(h='\n          <li\n            tabindex="-1"\n            data-index="'.concat(t,'"\n            ')).call(h,v?"data-back":"","\n            ")).call(p,b?"data-menu":"",'\n            role="menuitemcheckbox"\n            ')).call(d,k&&g?'aria-checked="true"':"","\n            ")).call(u,k&&!g?'aria-checked="false"':"","\n            ")).call(r,b||v?'aria-selected="false"':"","\n            ")).call(l,b?'aria-expanded="false"':"","\n            ")).call(c,v?'aria-expanded="true"':"","\n          >\n            <label>\n              ")).call(a,k?o()(f='<input\n                    value="'.concat(e.value,'"\n                    tabIndex="-1"\n                    ')).call(f,g?"checked":"",'\n                    type="checkbox"\n                  />'):'<input disabled aria-hidden="true" type="checkbox"/>',"\n              ")).call(s,v?P()("txt.help_center.views.admin.shared.back"):e.label,"\n            </label>\n          </li>\n        ");return y.replace(/\n/g,"").replace(/[\s ]+</g,"<").replace(/>[\s ]+</g,"><").replace(/>[\s ]+/g,">")})).join(""),s}},{key:"render",value:function(e){var t=this,n=this.props.container,s=n.children[0],i=this.createMenu();return s&&e?(s.insertAdjacentElement("afterend",i),n.classList.add("forward"),void j()((function(){s.parentNode.removeChild(s),n.classList.remove("forward"),t.focusCurrentOption()}),200)):s&&!e?(s.insertAdjacentElement("beforebegin",i),n.classList.add("back"),void j()((function(){s.parentNode.removeChild(s),n.classList.remove("back"),t.focusCurrentOption()}),200)):void n.appendChild(i)}}]),e}(),G=M,Q=I,R=A,U=H,V=C,W=T,X=q,Y=function(){function e(t){var n,s,i,a,o,c,l,r,u,d,p,h;b()(this,e),this.props=t,this.views={},this.state={isOpen:!1,focusedIndex:0,options:t.options,selectedOptions:t.selectedOptions},this.openMenu=f()(n=this.openMenu).call(n,this),this.closeMenu=f()(s=this.closeMenu).call(s,this),this.unselectOption=f()(i=this.unselectOption).call(i,this),this.toggleOption=f()(a=this.toggleOption).call(a,this),this.goBack=f()(o=this.goBack).call(o,this),this.goInto=f()(c=this.goInto).call(c,this),this.focusOption=f()(l=this.focusOption).call(l,this),this.focusPrevious=f()(r=this.focusPrevious).call(r,this),this.focusNext=f()(u=this.focusNext).call(u,this),this.focusToggle=f()(d=this.focusToggle).call(d,this),this.selectFocused=f()(p=this.selectFocused).call(p,this),this.focusHandler=f()(h=this.focusHandler).call(h,this),this.render(),this.setEventListeners()}return g()(e,[{key:"setState",value:function(e){this.state=p()({},this.state,e),this.update()}},{key:"setEventListeners",value:function(){var e,t=this.props.container;t.addEventListener("click",(function(e){return e.stopPropagation()})),t.addEventListener("keydown",f()(e=this.keyHandler).call(e,this))}},{key:"updateEventListeners",value:function(){var e=this.state.isOpen;document["".concat(e?"add":"remove","EventListener")]("click",this.closeMenu),document["".concat(e?"add":"remove","EventListener")]("focusin",this.focusHandler)}},{key:"focusHandler",value:function(e){this.props.container.contains(e.target)||this.setState({isOpen:!1})}},{key:"keyHandler",value:function(e){var t,n=this.state.isOpen;if(!n&&u()(t=[U,V,R]).call(t,e.keyCode)>=0)return e.preventDefault(),this.openMenu(),void this.focusOption(0);if(n)switch(e.preventDefault(),e.keyCode){case U:this.focusPrevious();break;case V:this.focusNext();break;case W:this.goInto();break;case X:this.goBack();break;case G:case R:this.selectFocused();break;case Q:this.closeMenu(),this.focusToggle()}}},{key:"openMenu",value:function(){this.setState({isOpen:!0})}},{key:"closeMenu",value:function(){this.setState({isOpen:!1})}},{key:"selectOption",value:function(e){var t,n=this.state.selectedOptions;this.setState({selectedOptions:o()(t=[]).call(t,l()(n),[e])})}},{key:"unselectOption",value:function(e){var t=this.state.selectedOptions;this.setState({selectedOptions:i()(t).call(t,(function(t){return t.value!==e}))})}},{key:"isOptionSelected",value:function(e){var t=this.state.selectedOptions;return i()(t).call(t,(function(t){return t.value===e})).length>0}},{key:"toggleOption",value:function(){var e=this.state,t=e.focusedIndex,n=e.options[t];this.isOptionSelected(n.value)?this.unselectOption(n.value):this.selectOption(n)}},{key:"selectFocused",value:function(){var e=this.state,t=e.focusedIndex,n=e.options[t];n&&(n.parent?this.goBack():n.options?this.goInto():this.toggleOption())}},{key:"goBack",value:function(){var e=this.state,t=e.options[e.focusedIndex];t&&t.parent&&this.setState({options:t.parent,focusedIndex:0})}},{key:"goInto",value:function(){var e=this.state,t=e.options[e.focusedIndex];t&&t.options&&this.setState({options:t.options,focusedIndex:0})}},{key:"focusToggle",value:function(){this.setState({focusedIndex:-1})}},{key:"focusOption",value:function(e){this.setState({focusedIndex:e})}},{key:"focusPrevious",value:function(){var e=this.state.focusedIndex;-1!==e&&this.focusOption(e-1)}},{key:"focusNext",value:function(){var e=this.state,t=e.focusedIndex;t!==e.options.length-1&&this.focusOption(t+1)}},{key:"update",value:function(){this.views.toggle.updateProps(this.state),this.views.menu.updateProps(this.state),this.updateEventListeners()}},{key:"render",value:function(){var e=this.props.container;e.className="hc-multiselect",e.innerHTML='\n      <div class="hc-multiselect-toggle"></div>\n      <div class="hc-multiselect-menu"></div>\n    ',this.renderToggle(),this.renderMenu()}},{key:"renderToggle",value:function(){var e=this.openMenu,t=this.unselectOption,n=this.focusToggle,s=this.props,i=s.container,a=s.attributes,o=i.querySelector(".hc-multiselect-toggle");this.views.toggle=new B(p()({},this.state,{container:o,attributes:a,openMenu:e,unselectOption:t,focusToggle:n}))}},{key:"renderMenu",value:function(){var e=this.focusOption,t=this.selectFocused,n=this.props.container.querySelector(".hc-multiselect-menu");this.views.menu=new z(p()({},this.state,{container:n,focusOption:e,selectFocused:t}))}}]),e}();t.default=function(e){var t=JSON.parse(e.dataset.multiselect),n=JSON.parse(e.value)||[],s=function e(t,n){var s=[];return n&&s.push({parent:n}),L()(t).call(t,(function(t){s.push(t.options?p()({},t,{options:e(t.options,s)}):t)})),s}(t),i=function e(t,n){return w()(t).call(t,(function(t,n){var s=u()(t).call(t,n.value);return s>-1&&(t[s]=n),n.options?e(n.options,t):t}),l()(n))}(t,n),a={id:e.getAttribute("id"),name:e.getAttribute("name"),"aria-required":e.getAttribute("aria-required"),"aria-describedby":e.getAttribute("aria-describedby"),"aria-labelledby":e.getAttribute("aria-labelledby")},o=document.createElement("div");return e.parentNode.replaceChild(o,e),new Y({options:s,selectedOptions:i,attributes:a,container:o})}}}]);